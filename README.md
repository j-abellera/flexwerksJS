# FlexWerks v1.1

FlexWerks is a script built to autmoate the process of grabbing blocks for Amazon Flex drivers.

It is built with Javascript and is executed with node.

This project was built for the sole purpose for me to use it when I needed extra work. I would run this script to automate everything so that I wouldn't have to worry about checking for blocks manually which can take hours of my time and maybe some sore fingers from tapping away mindlessly.

## Updates

To try and prevent captchas from hindering the acceptance of blocks, I have made the script run a validation after every failed block capture and after every rate limit timeout. I may add this validation to run after any type of block attempt whether its successful or not. I have also added a validation that happens at a predetermined time while the script is active. This can be changed using captchaValidationInterval found in the config.json.

## Future Updates

Currently, Twilio messaging does not work. They have recently released new regulations that require anyone using the service to provide an opt-in page, opt-out options, and a bunch of other legal jargon to be approved before continued use of its services. This you no texts will be sent when a block is captured, so it's highly adviseable to look for any notifications from Amazon Flex  frequently while the script is running or risk missing a scheduled block. This will be a priorirty after all bugs are squahed.

Currently, there is no option to login and get the refreshToken and acessToken. I already have this information and can use the script freely but if this script is accessed by anyone else, it will be useless. This is priority but will be focused on after everything since I don't have plans to release this to the public anytime soon. Those who are using this that isn't me probably already have these tokens available.

There is an issue with acGate workers providing invalid uniqueValidationId and causes acGate to loop. I am not sure why and how they are providing invalid Ids but I do know that an invalid Id can be generated by visiting a certain url with omitted parameters. It's also possible the Ids can be tied to different countries but I haven't tested. I have to implement a timeout when invalid urls are provided too frequently to avoid unnecessary costs.

## How to use FlexWerks

FlexWerks works very simple. It reads personal information about your amazon account as well as your preferences on catching blocks, then it runs and attempts to grab blocks until you cancel the script or the retry limit is reached.

All information needed is contained inside the config.json
There are key values that need to be provided for the script to work:

minBlockRate - minimum total payout of a block
minPayRatePerHour - minimum pay/hour based on block rate
arrivalBuffer - VERY IMPORTANT. Minimum time between now and the start of the block.
desiredWarehouses - Warehouses that you would like to catch blocks for
desiredWFWarehouses - Wholefoods locations you wantto capture blocks for
desiredStartTime - formatted in 12hr ex. '4:30 PM'
desiredEndTime - formatted in 12hr ex. 12:30 PM
desiredWeekDays - days of week you want to work. defaults to any day
retryLimit - amount of times you want the script to look for blocks. defaults to 1 million
refreshInterval - seconds between each retry attempt
timoutLength - time to wait after script notices rate limiting
acAPIKey - VERY IMPORTANT. Needed to bypass captcha gates
refreshToken - VERY IMPORTANT. Used for retrieivng accessTokens. Obtained with sign-in
accessToken - VERY IMPORTANT. Used for accessing amazon api. Obtained with sing-in

When all required information is saved in the config.json. You can run the script.

## Commands

Run the script:
"node app.js"

Get service areas (available amazon warehouses and wholefoods locations in your area):
"node app.js getAllServiceAreas" OR "node app.js --w"
